<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>



<link rel="stylesheet" href="../css/foundation.css" />
<link rel="stylesheet" href="../css/app.css" />
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />

<style>
body{

}
#lean_overlay {
    position: fixed;
    z-index:100;
    top: 0px;
    left: 0px;
    height:100%;
    width:100%;
    background: #000;
    display: none;
}
#habit_input_modal{
	border-radius: 2px;
	-moz-border-radius: 2px;
	-webkit-border-radius: 2px;

	width:30%;
	padding: 20px;
	background: white;
	display:none;

}
#habit_list{
list-style: none;
}

#habit-section{
padding-bottom:5%;

}
#habit_wrapper{
  border:dotted 5px #ecf0f1;
  /*border-left:dotted 5px #ecf0f1;*/
  padding-right:2%;
  background:#282C34;

  margin-left:20%;
  margin-right:20%;
}
#habit_list > li{
	border-radius: 2px;
	-moz-border-radius: 2px;
	-webkit-border-radius: 2px;
	padding: 20px;
	margin-top: 15px;
	margin-bottom:15px;
	background: #E74C3C;
}

#habit_list > li:hover{
	background:#F25C5C;

}


#page_nav{
}

#upper-left{
	float:left;
	width:80%;
}

#upper-right{
	float:right;
	width: 20%;
}



</style>


<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="../js/jquery.leanModal.min.js"></script>

<script src="../js/foundation.js"></script> <!--switch to min version when launch-->



    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>


<script>
//namespace
var habitUserData={};
habitUserData.currentPage = 1;


$(document).ready(function(){
	$("#in").click(function(){



		$.get("/health1/server/habit/user", {userid:"123"} ,function(data){
				var temp;
				data = JSON.parse(data);
				habitUserData.data = data;
				habitUserData.pageAmount = Math.ceil(data.length/4);


				///creating the habit list for page1
				for(var i = 0; i <= data.length-1; i++){
					console.log(data[i]);

          if (i <= 3){ //only display four of the habits, the rest attach it to Dom but display:none
            $("<li id = habit" + i + " > " + data[i].description + " </li>").insertBefore($("#add_more"));
          }else{
            $("<li id = habit" + i + " style = display:none;> "+ data[i].description + " </li>").insertBefore($("#add_more"));

          }

          (function(n){
						$("#habit"+n).click(function(){
							$(this).css({
								 	"font-style": "italic",
      								"font-weight": "bolder"
							});
						});
					})(i);



        }

				//creating page navigation
				temp = $("#page_nav ul .pagination-next");
				$("<li class='current' id = 'page1' ><a href='#'>1</a></li>").insertBefore(temp);

        $("#page1").on("click", function (){

              toggleHabit(habitUserData.currentPage);
              $("#page" + habitUserData.currentPage).removeClass('current');
							habitUserData.currentPage = 1; //the new current page
							$(this).addClass('current');
							$(".pagination-previous").addClass("disabled");
							$(".pagination-previous").html("Previous");
              toggleHabit(habitUserData.currentPage);

				})

				if (habitUserData.pageAmount > 0){
					for (i=2; i <= habitUserData.pageAmount; i++){

						$("<li id = 'page" + i +"'><a href='#'>" + i +"</a></li>").insertBefore(temp);

						(function(n){


							$("#page" +n).click(function(){

                toggleHabit(habitUserData.currentPage);

							$("#page" + habitUserData.currentPage).removeClass('current');
							habitUserData.currentPage = n; //the new current page
							$(this).addClass('current');
							$(".pagination-previous").removeClass("disabled");
							$(".pagination-previous").html("<a href='#'>Previous</a>");
              toggleHabit(habitUserData.currentPage);
							});
						})(i);
					}
				}


		});




	});

  function toggleHabit(currentPage){
    var start = (currentPage-1 )* 4;
    var end = start+3;
    for (var i = start; i <= end; i++){
        $("#habit"+i).toggle();
    }
  }


	$("#add_more").leanModal({ top : 200, overlay : 0.8, closeButton: ".modal_close" });



	$("#add_more").one('click', function(){
		window.setTimeout(function(){
			$("#instruction_header").fadeTo(1000, 1);

			window.setTimeout(function(){

        $("<p>Let's fill out a habit description first</p>").insertBefore($("#habit_input_body"));
			}, 1000);





		}, 500);

	});



});




</script>

</head>






<body>



<div class = "wrapper clear" style="overflow: hidden;">

	<div id = "upper-left">

        <div id="in">
            hello
        </div>

        <div id="habit-section">habit list follows:
          <div id = "habit_wrapper">
            <ul id = "habit_list">

                <li id="add_more" style = "margin-top: 30px;" href="#habit_input_modal">add more</li>
            </ul>
          </div>
        </div>


        <div id = "page_nav">
            <ul class="pagination text-right" role="navigation" aria-label="Pagination">
                <li class="pagination-previous disabled" >Previous</li>
                <li class="pagination-next"><a href="#">Next</a></li>
            </ul>
        </div>



        <div id="habit_input_modal">
            <div id="instruction_header" style="opacity:0">
              <div class="success progress" role="progressbar" tabindex="0" aria-valuenow="25" aria-valuemin="0" aria-valuetext="25 percent" aria-valuemax="100">
        			     <div class="progress-meter" style="width: 25%;"></div>
     			    </div>
              <p>Hi there...</p>
            </div>
            <div id="habit_input_body">
              <form id = "habit_input_form">
                <input type = "test">
              </form>
            </div>
        </div>



    </div>



    <div id = "upper-right">
      reward places

    </div>

</div>


<div class="callout large secondary">
<div class="row">
  <div class="large-4 columns">
    <h5>Our Goal</h5>
    <p>To motivate positive attutide and habit through discripline</p>
    </h4>
  </div>
  <div class="large-3 large-offset-2 columns">
    <ul class="menu vertical">
      <li><a href="#">Contact Us</a></li>
      <li><a href="#">Two</a></li>
      <li><a href="#">Three</a></li>
      <li><a href="#">Four</a></li>
    </ul>
  </div>
  <div class="large-3 columns">
    <ul class="menu vertical">
      <li><a href="#">One</a></li>
      <li><a href="#">Two</a></li>
      <li><a href="#">Three</a></li>
      <li><a href="#">Four</a></li>
    </ul>
  </div>
</div>
</div>


</body>
</html>
